webpackJsonp([22],{"+R/T":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".box[data-v-be6cef20]{margin-bottom:.13333333rem;border:.01333333rem solid #dddee1;border-radius:.06666667rem}.box[data-v-be6cef20]:last-child{margin-bottom:0}.box-header[data-v-be6cef20]{padding:.10666667rem .64rem .10666667rem .21333333rem;color:#495060;font-size:.16rem;line-height:.21333333rem;border-bottom:.01333333rem solid #dddee1}.box-detail[data-v-be6cef20]{padding:.13333333rem}",""])},"1a86":function(t,e,n){var o=n("VU/8")(n("zjsT"),n("h+R+"),!1,function(t){n("3RNP")},"data-v-674060ef",null);t.exports=o.exports},"34Qj":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Col",{staticClass:"box-detail",attrs:{span:t.span,offset:t.offset}},[""!==t.title?n("div",{staticClass:"box-detail-title",style:{width:t.titleWidth+"px"}},[t._v(t._s(t.title)+":")]):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},"3Jpz":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".box-detail{line-height:.34666667rem}.box-form .box-detail{margin-bottom:.13333333rem;line-height:.44rem}.box-detail>.ivu-form-item{margin-bottom:0;display:inline-block}.box-detail .box-detail-title{text-align:right;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}",""])},"3RNP":function(t,e,n){var o=n("COeh");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("9234a4f6",o,!0,{})},"5IxC":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".modal-body[data-v-67bf1da2]{max-height:8.66666667rem;overflow-y:auto}",""])},"5Qa0":function(t,e,n){var o=n("eive");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("26316a8c",o,!0,{})},"5QjM":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"box",props:{title:{type:String,default:"标题"},form:[Boolean]}}},"5mcM":function(t,e,n){var o=n("5IxC");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},"5zC9":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".ivu-table .table-info-row td[data-v-46901fae]{background-color:#2db7f5;color:#fff}",""])},"6NqX":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{data:{}},data:function(){return{loading:!1}},methods:{change:function(t){!1===t&&this.$emit("on-change")}}}},"8Zki":function(t,e,n){var o=n("FjqK");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("b19b766a",o,!0,{})},COeh:function(t,e,n){var o=n("mdC5");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},DJ4p:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".amap-page-container[data-v-5998b690]{height:5.33333333rem}",""])},F7c3:function(t,e,n){var o=n("fOAn");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("7033e817",o,!0,{})},FSn4:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("Table",{ref:"table",attrs:{columns:this.tableCol,data:this.data,size:"small",loading:this.loading}})},staticRenderFns:[]}},FjqK:function(t,e,n){var o=n("u0ja");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},GbI5:function(t,e,n){var o=n("jQv0");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("6b6e24d0",o,!0,{})},H0Fj:function(t,e,n){var o=n("VU/8")(n("Kl74"),n("tlST"),!1,function(t){n("F7c3")},"data-v-5998b690",null);t.exports=o.exports},H2ef:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"my-table",props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{leftCol:[{title:"序号",render:function(t,e){var n=e.index;return t("span",null,[++n])},width:75}],rightCol:[]}},computed:{tableCol:function(){return this.leftCol.concat(this.columns,this.rightCol)}}}},"HtL/":function(t,e,n){var o=n("VU/8")(n("cgbW"),n("I2F8"),!1,function(t){n("RQOa")},"data-v-67bf1da2",null);t.exports=o.exports},I2F8:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticStyle:{position:"relative"},attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[t._t("footer")],2)],1)},staticRenderFns:[]}},Kl74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c(n("HtL/")),a=c(n("RGLJ")),i=c(n("6NqX")),r=c(n("xi7R")),s=c(n("OcB2")),l=n("ezXf");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"point-detail",components:{Detail:a.default,ComponentModal:o.default,Box:s.default},mixins:[i.default,r.default],data:function(){var t=this;return{row:{},ruleUpdate:(0,l.Validator)(this),positions:{lng:"",lat:"",address:"",loaded:!1},center:[121.59996,31.197646],events:{click:function(e){AMap.plugin("AMap.Geocoder",function(){new AMap.Geocoder({city:"010"}).getAddress(e.lnglat,function(n,o){"complete"===n&&"OK"===o.info&&(t.row.fixed_name=o.regeocode.formattedAddress,t.row.lat=e.lnglat.lat,t.row.lng=e.lnglat.lng)})})}}}},computed:{position:function(){return[this.row&&this.row.lng?this.row.lng:0,this.row&&this.row.lat?this.row.lat:0]}},mounted:function(){var t=this;this.$http.get("point/show/"+this.data.id).then(function(e){t.row=e.data.data})}}},NDCw:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default"),t._v(" "),n("div",{staticClass:"box-flex-list"},[n("Card",{attrs:{"dis-hover":""}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._t("title",[n("span",[t._v("列表")])]),t._v(" "),t._t("button")],2),t._v(" "),n("my-table",{ref:"table",attrs:{columns:t.columns,data:t.value.data,size:"small","row-class-name":t.rowClassName,loading:t.loading}}),t._v(" "),n("Page",{attrs:{total:t.value.page.total,size:"small",current:t.value.page.current,"page-size":t.value.page.page_size,"show-total":""},on:{"on-change":t.change}})],1)],1)],2)},staticRenderFns:[]}},OcB2:function(t,e,n){var o=n("VU/8")(n("5QjM"),n("XWyl"),!1,function(t){n("bH0D")},"data-v-be6cef20",null);t.exports=o.exports},RGLJ:function(t,e,n){var o=n("VU/8")(n("y/gY"),n("34Qj"),!1,function(t){n("GbI5")},null,null);t.exports=o.exports},RQOa:function(t,e,n){var o=n("5mcM");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("8c8ae600",o,!0,{})},"SiY/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=n("Uo1L"),i=(o=a)&&o.__esModule?o:{default:o};e.default={name:"my-lists",components:{MyTable:i.default},props:{value:{type:Object,default:function(){return{data:[],page:{total:100,current:1,page_size:20}}}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$emit("change",t)},rowClassName:function(t,e){}}}},Uo1L:function(t,e,n){var o=n("VU/8")(n("H2ef"),n("FSn4"),!1,function(t){n("8Zki")},"data-v-7eccc0f0",null);t.exports=o.exports},XWyl:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box",class:{"box-form":this.form}},[e("div",{staticClass:"box-header"},[this._v(this._s(this.title))]),this._v(" "),e("Row",{staticClass:"box-detail"},[this._t("default")],2)],1)},staticRenderFns:[]}},bH0D:function(t,e,n){var o=n("oZcm");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("dcf63590",o,!0,{})},cgbW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"component-modal",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:650},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.$emit("on-change")}}}},dSCJ:function(t,e,n){var o=n("VU/8")(n("SiY/"),n("NDCw"),!1,function(t){n("5Qa0")},"data-v-46901fae",null);t.exports=o.exports},eive:function(t,e,n){var o=n("5zC9");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},ezXf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Validator=function(t){return{fixed_name:[{required:!0,type:"string",message:"定位地址不能为空",trigger:"blur"}],lng:[{required:!0,type:"float",message:"经度不能为空"}],lat:[{required:!0,type:"float",message:"纬度不能为空"}]}}},fOAn:function(t,e,n){var o=n("DJ4p");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},"h+R+":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("my-list",{attrs:{columns:t.columns,loading:t.loading},on:{change:t.search},model:{value:t.lists.data,callback:function(e){t.$set(t.lists,"data",e)},expression:"lists.data"}},[n("Form",{attrs:{inline:""}},[n("FormItem",{attrs:{"label-width":1}},[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.download()}}},[t._v("导出")])],1)],1),t._v(" "),n(t.component.current,{tag:"component",attrs:{data:t.component.data},on:{"on-change":t.hideComponent}})],1)},staticRenderFns:[]}},h7KM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=n("nf43"),i=(o=a)&&o.__esModule?o:{default:o};e.default={mixins:[i.default],data:function(){return{searchForm:{},lists:{data:{data:[],page:{total:0,current:1,page_size:20}}},component:{current:"",data:{}}}},mounted:function(){this.search()},methods:{search:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},assignmentData:function(t){this.lists.data.data=t.data,this.lists.data.page.total=t.total,this.lists.data.page.current=t.current_page,this.lists.data.page.page_size=t.per_page},showComponent:function(t,e){this.component.current=t,this.component.data=e},hideComponent:function(){this.component.current="",this.component.data={},this.search()},destroyItem:function(t,e){var n=this;this.loading=!0,this.$http.delete(e).then(function(t){n.search()}).catch(function(t){n.formatErrors(t)}).finally(function(){n.loading=!1})},request:function(t){var e=JSON.parse(JSON.stringify(this.searchForm));return e.page=t,e}}}},jQv0:function(t,e,n){var o=n("3Jpz");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},mdC5:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"",""])},oZcm:function(t,e,n){var o=n("+R/T");"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("MTIv")(o,a);o.locals&&(t.exports=o.locals)},tlST:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("component-modal",{attrs:{title:"修改位置",width:900}},[n("box",{attrs:{title:"当前定位"}},[n("Form",{ref:"row",attrs:{model:t.row,"label-width":80,rules:t.ruleUpdate}},[n("FormItem",{attrs:{label:"导入地址:",prop:"name"}},[n("Input",{model:{value:t.row.name,callback:function(e){t.$set(t.row,"name",e)},expression:"row.name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"定位地址:",prop:"fixed_name"}},[n("Input",{model:{value:t.row.fixed_name,callback:function(e){t.$set(t.row,"fixed_name",e)},expression:"row.fixed_name"}})],1)],1)],1),t._v(" "),n("box",{attrs:{title:"地图定位"}},[n("div",{staticClass:"amap-page-container"},[n("el-amap",{attrs:{center:t.position,events:t.events}},[n("el-amap-marker",{attrs:{vid:"amap",position:t.position}})],1)],1)]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.updateSubmit("row","point/"+t.row.id)}}},[t._v("保存")])],1)],1)},staticRenderFns:[]}},u0ja:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"",""])},xi7R:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=n("nf43"),i=(o=a)&&o.__esModule?o:{default:o};e.default={mixins:[i.default],methods:{unObserver:function(t){return JSON.parse(JSON.stringify(t))},updateSubmit:function(t,e){var n=this;this.$refs[t].validate(function(o){o?(n.loading=!0,n.$http.put(e,n.unObserver(n._data[t])).then(function(t){n.$Message.success("Success!"),n.change(!1)}).catch(function(t){n.formatErrors(t)}).finally(function(){n.loading=!1})):n.$Message.error("验证不通过!")})},createSubmit:function(t,e){var n=this;this.$refs[t].validate(function(o){o&&(n.loading=!0,n.$http.post(e,n._data[t]).then(function(t){n.$Message.success("Success!"),n.change(!1)}).catch(function(t){n.formatErrors(t)}).finally(function(){n.loading=!1}))})}}}},"y/gY":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"detail",props:{title:{type:String,default:""},span:{type:Number,default:8},offset:{type:Number,default:0},titleWidth:{type:Number,default:80}}}},zjsT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n("dSCJ")),a=s(n("HtL/")),i=s(n("h7KM")),r=s(n("H0Fj"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"point",components:{MyList:o.default,ComponentModal:a.default,PointDetail:r.default},mixins:[i.default],data:function(){var t=this;return{columns:[{title:"地图位置",render:function(e,n){var o=n.row;return o.line_point?e("a",{attrs:{href:"javascript:void(0)"}},["位置"]):e("i-button",{on:{click:function(){return t.showComponent("PointDetail",o)}},attrs:{size:"small"}},["位置"])}},{title:"到仓时间",render:function(t,e){var n=e.row;return t("span",null,[n.point_time.arrival_warehouse_day," ",n.point_time.arrival_warehouse_time])}},{title:"商户简称",render:function(t,e){return t("span",null,[e.row.point_time.warehouse.merchant.short_name])}},{title:"仓名称",render:function(t,e){return t("span",null,[e.row.point_time.warehouse.title])}},{title:"联系人",key:"contacts"},{title:"所在区域",key:"area"},{title:"收货地址",key:"fixed_name"},{title:"备注",key:"remark"},{title:"操作",render:function(e,n){var o=n.row;return e("button-group",null,[e("poptip",{attrs:{confirm:!0,transfer:!0,title:"确定删除吗？"},on:{"on-ok":function(){return t.destroyItem(o,"point/"+o.id)}}},[e("i-button",{attrs:{size:"small"}},["删除"])])])}}]}},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("point/"+this.$route.query.id,{params:this.request(e)}).then(function(e){t.assignmentData(e.data.data)}).catch(function(e){t.formatErrors(e)}).finally(function(){t.loading=!1})},download:function(){this.$http.download("point/export/"+this.$route.query.id,this.request(),"配送点.xls")}}}}});
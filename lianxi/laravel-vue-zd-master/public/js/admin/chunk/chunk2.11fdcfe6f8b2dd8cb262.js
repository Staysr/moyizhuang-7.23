webpackJsonp([2],{"+4U+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(a("HtL/")),n=c(a("dSCJ")),s=c(a("h7KM")),i=c(a("6NqX")),o=c(a("KrrG")),l=c(a("Uo1L"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"assigned",components:{MyTable:l.default,Remote:o.default,MyLists:n.default,ComponentModal:r.default},mixins:[s.default,i.default],data:function(){var t=this,e=[{title:"司机姓名",key:"name"},{title:"手机号码",key:"phone"},{title:"车牌号码",key:"car_number"},{title:"城市",render:function(t,e){var a=e.row;return t("span",{directives:[{name:"show",value:a.category}]},[a.category.name])}},{title:"车型",render:function(t,e){var a=e.row;return t("span",{directives:[{name:"show",value:a.car_type}]},[a.car_type.name])}}];return{chooseColumns:e,columns:[].concat(e,[{title:"操作",render:function(e,a){var r=a.row;return e("div",null,[e("i-button",{attrs:{size:"small"},on:{click:function(){t.choose(r)}}},["选择"])])}}]),searchForm:{car_type_id:this.data.car_type_ids,n_id:this.data.driver_id},chooseDrivers:[],displayChooseDrivers:!1,displayAssignedUnitPrice:!1,assignedFrom:{driver_id:0,unit_price:0}}},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("driver/lists",{params:this.request(e)}).then(function(e){t.assignmentData(e.data.data)}).finally(function(){t.loading=!1})},choose:function(t){this.assignedFrom.driver_id=t.id,this.displayAssignedUnitPrice=!0},assigned:function(){var t=this;this.loading=!0,this.$http.put("task/change/"+this.data.id,this.assignedFrom).then(function(t){console.log(t)}).catch(function(e){t.formatErrors(e)}).finally(function(){t.loading=!1})}}}},"+v+A":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"detail",props:{title:{type:String,default:""},span:{type:Number,default:8},offset:{type:Number,default:0},titleWidth:{type:Number,default:80}}}},"0IRZ":function(t,e,a){var r=a("p/y2");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("2923ef86",r,!0,{})},"0dNs":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(a("pEmh")),n=s(a("nf43"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"group-radio",mixins:[r.default,n.default],props:{value:{type:Number},url:{type:String,required:!0,default:""}},data:function(){return{publicValue:this.value,checkboxs:[]}},mounted:function(){this.$nextTick(function(){var t=this;this.loading=!0,this.$http.get(this.url).then(function(e){t.checkboxs=e.data.data}).finally(function(){t.loading=!1})})},methods:{change:function(t){this.$emit("input",this.publicValue),this.dispatch("FormItem","on-form-blur",this.publicValue)}},watch:{value:function(t){this.publicValue=t}}}},"0eeJ":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default"),t._v(" "),a("div",{staticClass:"box-flex-list"},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._t("title",[a("span",[t._v("列表")])]),t._v(" "),t._t("button")],2),t._v(" "),a("my-table",{ref:"table",attrs:{columns:t.columns,data:t.value.data,size:"small","row-class-name":t.rowClassName,loading:t.loading}}),t._v(" "),a("Page",{attrs:{total:t.value.page.total,size:"small",current:t.value.page.current,"page-size":t.value.page.page_size,"show-total":""},on:{"on-change":t.change}})],1)],1)],2)},staticRenderFns:[]}},"0pvi":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},"1XX2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"my-table",props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{leftCol:[{title:"序号",render:function(t,e){var a=e.index;return t("span",null,[++a])},width:75}],rightCol:[]}},computed:{tableCol:function(){return this.leftCol.concat(this.columns,this.rightCol)}}}},"5EYM":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".ivu-table .table-info-row td[data-v-46901fae]{background-color:#2db7f5;color:#fff}",""])},"63su":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"tags-true-or-false",props:{status:{type:Number,required:!0},trueValue:{type:String,default:"是"},falseValue:{type:String,default:"否"}}}},"6NqX":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{data:{}},data:function(){return{loading:!1}},methods:{change:function(t){!1===t&&this.$emit("on-change")}}}},"76cA":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0===t.status?a("tag",{attrs:{color:"lime"}},[t._v("司机报价中")]):1===t.status?a("tag",{attrs:{color:"green"}},[t._v("选司机中")]):2===t.status?a("tag",{attrs:{color:"blue"}},[t._v("选到可用司机")]):3===t.status?a("tag",{attrs:{color:"cyan"}},[t._v("客户不选司机")]):4===t.status?a("tag",{attrs:{color:"volcano"}},[t._v("过期不选司机")]):5===t.status?a("tag",{attrs:{color:"gold"}},[t._v("无司机报价")]):6===t.status?a("tag",{attrs:{color:"red"}},[t._v("任务作废")]):t._e()},staticRenderFns:[]}},"8Odt":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},"8RRq":function(t,e,a){var r=a("VU/8")(a("An32"),a("Z0zr"),!1,function(t){a("q9RQ")},"data-v-93817a10",null);t.exports=r.exports},"8lzf":function(t,e,a){var r=a("VU/8")(a("NS49"),a("dCzE"),!1,function(t){a("BRUN")},"data-v-abc3087c",null);t.exports=r.exports},"8vx3":function(t,e,a){var r=a("VU/8")(a("Jfvg"),a("v6QF"),!1,function(t){a("ea6+")},"data-v-78d2ab4f",null);t.exports=r.exports},"9Xvl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneOf=function(t,e){for(let a=0;a<e.length;a++)if(t===e[a])return!0;return!1},e.camelcaseToHyphen=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},e.getScrollBarSize=function(t){if(n)return 0;if(t||void 0===s){const t=document.createElement("div");t.style.width="100%",t.style.height="200px";const e=document.createElement("div"),a=e.style;a.position="absolute",a.top=0,a.left=0,a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const r=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;r===n&&(n=e.clientWidth),document.body.removeChild(e),s=r-n}return s},e.getStyle=function(t,e){if(!t||!e)return null;"float"===(a=e,e=a.replace(o,function(t,e,a,r){return r?a.toUpperCase():a}).replace(l,"Moz$1"))&&(e="cssFloat");var a;try{const a=document.defaultView.getComputedStyle(t,"");return t.style[e]||a?a[e]:null}catch(a){return t.style[e]}},a.d(e,"firstUpperCase",function(){return c}),e.warnProp=function(t,e,a,r){a=c(a),r=c(r),console.error(`[iView warn]: Invalid prop: type check failed for prop ${e}. Expected ${a}, got ${r}. (found in component: ${t})`)},a.d(e,"deepCopy",function(){return u}),e.scrollTop=function(t,e=0,a,r=500,n){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)});const s=Math.abs(e-a),i=Math.ceil(s/r*50);!function e(a,r,s){if(a===r)return void(n&&n());let i=a+s>r?r:a+s;a>r&&(i=a-s<r?r:a-s);t===window?window.scrollTo(i,i):t.scrollTop=i;window.requestAnimationFrame(()=>e(i,r,s))}(e,a,i)},a.d(e,"findComponentUpward",function(){return d}),e.findComponentDownward=function t(e,a){const r=e.$children;let n=null;if(r.length)for(const e of r){const r=e.$options.name;if(r===a){n=e;break}if(n=t(e,a))break}return n},e.findComponentsDownward=function t(e,a){return e.$children.reduce((e,r)=>{r.$options.name===a&&e.push(r);const n=t(r,a);return e.concat(n)},[])},e.findComponentsUpward=function t(e,a){let r=[];const n=e.$parent;return n?(n.$options.name===a&&r.push(n),r.concat(t(n,a))):[]},e.findBrothersComponents=function(t,e,a=!0){let r=t.$parent.$children.filter(t=>t.$options.name===e),n=r.findIndex(e=>e._uid===t._uid);a&&r.splice(n,1);return r},e.hasClass=p,e.addClass=function(t,e){if(!t)return;let a=t.className;const r=(e||"").split(" ");for(let e=0,n=r.length;e<n;e++){const n=r[e];n&&(t.classList?t.classList.add(n):p(t,n)||(a+=" "+n))}t.classList||(t.className=a)},e.removeClass=function(t,e){if(!t||!e)return;const a=e.split(" ");let r=" "+t.className+" ";for(let e=0,n=a.length;e<n;e++){const n=a[e];n&&(t.classList?t.classList.remove(n):p(t,n)&&(r=r.replace(" "+n+" "," ")))}t.classList||(t.className=f(r))},e.setMatchMedia=function(){if("undefined"!=typeof window){const t=t=>({media:t,matches:!1,on(){},off(){}});window.matchMedia=window.matchMedia||t}};var r=a("I3G/");const n=a.n(r).a.prototype.$isServer;let s;const i=!n&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||!1);e.MutationObserver=i;const o=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/;function c(t){return t.toString()[0].toUpperCase()+t.toString().slice(1)}function u(t){const e=(a=t,{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(a)]);var a;let r;if("array"===e)r=[];else{if("object"!==e)return t;r={}}if("array"===e)for(let e=0;e<t.length;e++)r.push(u(t[e]));else if("object"===e)for(let e in t)r[e]=u(t[e]);return r}function d(t,e,a){a="string"==typeof e?[e]:e;let r=t.$parent,n=r.$options.name;for(;r&&(!n||a.indexOf(n)<0);)(r=r.$parent)&&(n=r.$options.name);return r}const f=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function p(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}e.dimensionMap={xs:"480px",sm:"768px",md:"992px",lg:"1200px",xl:"1600px"};e.sharpMatcherRegx=/#([^#]+)$/},An32:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"driver-select-status",props:{value:[String,Number]},data:function(){return{model:this.value}},methods:{setValue:function(t){this.$emit("input",t)}},watch:{value:function(t){this.model=t}}}},Aysg:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("Table",{ref:"table",attrs:{columns:this.tableCol,data:this.data,size:"small",loading:this.loading}})},staticRenderFns:[]}},B3BL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"task-status",props:{status:{required:!0}}}},"BO+j":function(t,e,a){var r=a("VU/8")(a("LyuY"),a("u7O2"),!1,function(t){a("TKoC")},"data-v-00954076",null);t.exports=r.exports},BRUN:function(t,e,a){var r=a("Zpae");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("3c0094f4",r,!0,{})},BUw7:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},BeHn:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("my-lists",{attrs:{columns:t.columns,loading:t.loading},on:{change:t.search},model:{value:t.lists.data,callback:function(e){t.$set(t.lists,"data",e)},expression:"lists.data"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("搜索")])]),t._v(" "),a("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":60}},[a("FormItem",{attrs:{label:"商户简称"}},[a("remote",{attrs:{"remote-url":"merchants/select","search-key":"title"},model:{value:t.searchForm.merchant_id,callback:function(e){t.$set(t.searchForm,"merchant_id",e)},expression:"searchForm.merchant_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"仓库名称"}},[a("remote",{attrs:{"remote-url":"warehouse/select",params:{merchant_id:this.searchForm.merchant_id},remote:!1},model:{value:t.searchForm.warehouse_id,callback:function(e){t.$set(t.searchForm,"warehouse_id",e)},expression:"searchForm.warehouse_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"任务编号"}},[a("Input",{model:{value:t.searchForm.task_id,callback:function(e){t.$set(t.searchForm,"task_id",e)},expression:"searchForm.task_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"线路名称"}},[a("Input",{model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"司机姓名"}},[a("remote",{attrs:{"remote-url":"driver/select","search-key":"title"},model:{value:t.searchForm.driver_id,callback:function(e){t.$set(t.searchForm,"driver_id",e)},expression:"searchForm.driver_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"任务类型"}},[a("task-type",{model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}})],1),t._v(" "),a("FormItem",{attrs:{label:"司机状态"}},[a("driver-select-status",{model:{value:t.searchForm.driver_status,callback:function(e){t.$set(t.searchForm,"driver_status",e)},expression:"searchForm.driver_status"}})],1),t._v(" "),a("FormItem",{attrs:{label:"发布日期"}},[a("c-date-picker",{staticStyle:{width:"260px"},attrs:{type:"datetimerange"},model:{value:t.searchForm.create_time,callback:function(e){t.$set(t.searchForm,"create_time",e)},expression:"searchForm.create_time"}})],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.search(1)}}},[t._v("搜索")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.go("task.create")}}},[t._v("招司机")])],1)],1)],1),t._v(" "),a(t.component.current,{tag:"components",attrs:{data:t.component.data},on:{"on-change":t.hideComponent}})],1)},staticRenderFns:[]}},DPOY:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},E4WB:function(t,e,a){var r=a("MdH7");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("57c01f3c",r,!0,{})},EJCv:function(t,e,a){var r=a("VU/8")(a("0dNs"),a("asC2"),!1,function(t){a("W5a2")},"data-v-659d19aa",null);t.exports=r.exports},F1M5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"task-type",props:{value:[String,Number]},data:function(){return{model:this.value}},methods:{setValue:function(t){this.$emit("input",t)}},watch:{value:function(t){this.model=t}}}},FR7p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(a("nf43")),n=s(a("BtGT"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"remote",mixins:[r.default,n.default],props:{remoteUrl:{type:String,default:"",required:!0},remote:{type:Boolean,default:!0},cache:{type:Boolean,default:!0},ready:{type:Boolean,default:!1},params:{type:Object,default:function(){}},searchKey:{type:String,default:"name"},value:{type:[String,Number]}},data:function(){return{publicValue:"",publicOptions:[],publicParams:{},options:this.defaultOption()}},mounted:function(){this.ready&&this.request()},methods:{setValue:function(t){this.$emit("input",t),this.$emit("on-change",this.options.find(function(e){return e.id===t}))},remoteMethod:function(t){var e=this;this.value!=t&&(this.options.find(function(t){return t.id===e.$refs[e.uuid].publicValue})&&this.options.find(function(t){return t.id===e.$refs[e.uuid].publicValue}).name===t||this.remote&&(this.publicParams[this.searchKey]=t,this.request()))},request:function(){var t=this;0===this.$store.getters.cache(this.key()).length?this.$store.getters.cacheLock(this.key())?(this.loading=!0,setTimeout(function(){t.refresh(),t.loading=!1},4e3)):this.search():this.refresh()},search:function(){var t=this;this.loading=!0,this.$store.commit("setCacheLock",this.key()),this.$http.get(this.remoteUrl,{params:this.getParams()}).then(function(e){t.cache?t.$store.commit("setCacheData",{key:t.key(),data:e.data.data}):t.publicOptions=e.data.data}).finally(function(){t.refresh(),t.loading=!1})},defaultOption:function(){return this.cache?this.$store.getters.cache(this.key()):this.publicOptions},key:function(){return this.remoteUrl+JSON.stringify(this.getParams())},refresh:function(){this.options=this.cache?this.$store.getters.cache(this.key()):this.publicOptions},getParams:function(){return Object.assign({},this.params,this.publicParams)},unObserver:function(t){return JSON.parse(JSON.stringify(t))}},watch:{params:{handler:function(t,e){JSON.stringify(t)!==JSON.stringify(e)&&(this.$refs[this.uuid].clearSingleSelect(),this.request())},deep:!0},value:{handler:function(t){this.publicValue=t},immediate:!0}}}},Fnw4:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0===t.status?a("tag",{attrs:{color:"warning"}},[t._v("无司机")]):1===t.status?a("tag",{attrs:{color:"default"}},[t._v("被选中")]):2===t.status?a("tag",{attrs:{color:"primary"}},[t._v("确认上岗")]):3===t.status?a("tag",{attrs:{color:"success"}},[t._v("任务完成")]):4===t.status?a("tag",{attrs:{color:"error"}},[t._v("任务取消")]):5===t.status?a("tag",{attrs:{color:"error"}},[t._v("无责任解约")]):t._e()},staticRenderFns:[]}},GHnE:function(t,e,a){var r=a("uxXg");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("781ee07c",r,!0,{})},GWUp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"component-modal",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:650},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.$emit("on-change")}}}},"HtL/":function(t,e,a){var r=a("VU/8")(a("GWUp"),a("zN6J"),!1,function(t){a("LrlP")},"data-v-67bf1da2",null);t.exports=r.exports},JJQZ:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return this.status?e("tag",{attrs:{color:"green"}},[this._v(this._s(this.trueValue))]):e("tag",{attrs:{color:"red"}},[this._v(this._s(this.falseValue))])},staticRenderFns:[]}},Jfvg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(a("HtL/")),n=l(a("6NqX")),s=l(a("RGLJ")),i=l(a("OcB2")),o=l(a("XmfH"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"show",components:{TaskStatus:o.default,Box:i.default,Detail:s.default,ComponentModal:r.default},mixins:[n.default],data:function(){return{tableCol:[{title:"序号",render:function(t,e){var a=e.index;return t("span",null,[++a])}},{title:"地址",key:"name"},{title:"联系人",key:"contacts"},{title:"联系方式",key:"contact_way"}],task:{send_time:[],warehouse:{id:0,title:""},distance_json:"",goods_volume:"",goods_weight:"",goods_num:"",unit_price:"",merchant_safe:{is_per:0,safe_fee:0},extra:{carry:{is_worker:0,is_loading:0,is_unloading:0,textarea:""},other:{is_remove_seat:0,is_trolley:0,is_tail_plate:0,is_extinguisher:0,is_lock:0,other_require:""}}}}},mounted:function(){this.search()},methods:{search:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$http.get("task/"+this.data.id).then(function(e){t.task=JSON.parse(JSON.stringify(e.data.data)),t.loading=!1})}},filters:{formatArray:function(t){return(t||[]).join(",")},formatWeek:function(t){var e="",a=["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"];return void 0!==t&&t instanceof Array?(t.forEach(function(t,r){e+=a[r]+" "}),e):t},valueOfSingle:function(t){var e="";return void 0!==t&&t instanceof Array?(t.forEach(function(t,a){e+=t.value+" "}),e):""},formatCarry:function(t){switch(t){case 0:return"无需搬运";case 1:return"轻度搬运";case 2:return"中度搬运";case 3:return"重度搬运"}},formatNumber:function(t){return t?t.min+"-"+t.max:""}}}},KrrG:function(t,e,a){var r=a("VU/8")(a("FR7p"),a("a/P1"),!1,function(t){a("VXKl")},"data-v-12f16dd7",null);t.exports=r.exports},LmO9:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择任务类型",clearable:"",filterable:""},on:{"on-change":t.setValue},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[a("Option",{attrs:{value:1}},[t._v("主任务")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("临时任务")])],1)},staticRenderFns:[]}},LrlP:function(t,e,a){var r=a("qkgB");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("4cb8b4f2",r,!0,{})},LyuY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(a("dSCJ")),n=d(a("h7KM")),s=d(a("6NqX")),i=d(a("HtL/")),o=d(a("OcB2")),l=a("NWXo"),c=d(a("xi7R")),u=d(a("EJCv"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"safe",components:{MyLists:r.default,ComponentModal:i.default,Box:o.default,GroupRadio:u.default},mixins:[n.default,s.default,c.default],data:function(){return{formUpdate:{merchant_safe_id:this.data.merchant_safe_id},rulesUpdate:(0,l.Validator)(this)}}}},M0DN:function(t,e,a){var r=a("VU/8")(a("Sd0t"),a("Fnw4"),!1,function(t){a("Scqj")},"data-v-f7cb4e32",null);t.exports=r.exports},MWZo:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".remote-select[data-v-12f16dd7]{width:150px}",""])},MdH7:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".box-detail{line-height:26px}.box-form .box-detail{margin-bottom:20px;line-height:33px}.box-detail>.ivu-form-item{margin-bottom:0;display:inline-block}.box-detail .box-detail-title{text-align:right;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}",""])},MsRT:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("DatePicker",{attrs:{type:t.type,format:t.format,options:t.options,placement:"bottom-end",placeholder:"选择时间",readonly:t.readonly,"split-panels":t.panels,transfer:""},on:{"on-change":t.change},model:{value:t.sValue,callback:function(e){t.sValue=e},expression:"sValue"}})},staticRenderFns:[]}},MtHA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(a("6NqX")),n=o(a("HtL/")),s=a("QVNU"),i=o(a("xi7R"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"agent",components:{ComponentModal:n.default},mixins:[r.default,i.default],data:function(){return{formUpdate:{driver_id:this.data.driver_id,remark:""},rulesUpdate:(0,s.Validator)(this)}}}},NS49:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(a("HtL/")),n=u(a("dSCJ")),s=u(a("h7KM")),i=u(a("6NqX")),o=u(a("KrrG")),l=u(a("Uo1L")),c=u(a("nf43"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"assigned",components:{MyTable:l.default,Remote:o.default,MyLists:n.default,ComponentModal:r.default},mixins:[s.default,i.default,c.default],data:function(){var t=this,e=[{title:"司机姓名",key:"name"},{title:"手机号码",key:"phone"},{title:"车牌号码",key:"car_number"},{title:"城市",render:function(t,e){var a=e.row;return t("span",{directives:[{name:"show",value:a.category}]},[a.category.name])}},{title:"车型",render:function(t,e){var a=e.row;return t("span",{directives:[{name:"show",value:a.car_type}]},[a.car_type.name])}}];return{chooseColumns:e,columns:[].concat(e,[{title:"操作",render:function(e,a){var r=a.row;return e("div",null,[e("i-button",{attrs:{size:"small"},on:{click:function(){t.choose(r)}},directives:[{name:"show",value:-1===t.oneOf(r)}]},["选择"]),e("i-button",{attrs:{size:"small"},on:{click:function(){t.cancel(r)}},directives:[{name:"show",value:-1!==t.oneOf(r)}]},["取消"])])}}]),searchForm:{car_type_id:this.data.car_type_ids},chooseDrivers:[],displayChooseDrivers:!1,displayAssignedUnitPrice:!1,assignedFrom:{drivers:[],unit_price:0}}},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("driver/lists",{params:this.request(e)}).then(function(e){t.assignmentData(e.data.data)}).finally(function(){t.loading=!1})},choose:function(t){-1===this.oneOf(t)&&(this.chooseDrivers.push(t),this.assignedFrom.drivers.push(t.id))},cancel:function(t){var e;-1!==(e=this.oneOf(t))&&(this.chooseDrivers.splice(e,1),this.assignedFrom.drivers.splice(e,1))},oneOf:function(t){return this.chooseDrivers.findIndex(function(e,a,r){return e.id===t.id})},assigned:function(){var t=this;this.loading=!0,this.$http.put("task/assigned/"+this.data.id,this.assignedFrom).then(function(t){console.log(t)}).catch(function(e){t.formatErrors(e)}).finally(function(){t.displayAssignedUnitPrice=!1,t.loading=!1})}}}},NWXo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Validator=function(t){return{merchant_safe_id:[{type:"number",required:!0,trigger:"blur",message:"必须选择保险"}]}}},NqaF:function(t,e,a){var r=a("VU/8")(a("tXO/"),a("X/aG"),!1,function(t){a("m92N")},"data-v-11a30ad6",null);t.exports=r.exports},NzrU:function(t,e,a){var r=a("VU/8")(a("keSp"),a("MsRT"),!1,function(t){a("Pojc")},"data-v-15632f10",null);t.exports=r.exports},OaEf:function(t,e,a){var r=a("VU/8")(a("63su"),a("JJQZ"),!1,function(t){a("wU3S")},"data-v-7bcbe18b",null);t.exports=r.exports},OcB2:function(t,e,a){var r=a("VU/8")(a("s7MV"),a("sF/1"),!1,function(t){a("YuGU")},"data-v-be6cef20",null);t.exports=r.exports},Pojc:function(t,e,a){var r=a("8Odt");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("354e0532",r,!0,{})},Q6D6:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},QCwG:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},QVNU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Validator=function(t){return{remark:[{required:!0,trigger:"blur",message:"备注必须填写"}]}}},RGLJ:function(t,e,a){var r=a("VU/8")(a("+v+A"),a("mHOb"),!1,function(t){a("E4WB")},null,null);t.exports=r.exports},"S/nR":function(t,e,a){var r=a("Q6D6");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("7c971760",r,!0,{})},Scqj:function(t,e,a){var r=a("gWVl");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("711f23bc",r,!0,{})},Sd0t:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"task-driver-status",props:{status:{type:Number,required:!0}}}},TKoC:function(t,e,a){var r=a("fbZ7");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("8192da40",r,!0,{})},TU5o:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},UVDD:function(t,e,a){var r=a("0pvi");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("745ba392",r,!0,{})},Uo1L:function(t,e,a){var r=a("VU/8")(a("1XX2"),a("Aysg"),!1,function(t){a("0IRZ")},"data-v-7eccc0f0",null);t.exports=r.exports},VFbF:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"无责任解约",width:350,loading:t.loading}},[a("Form",{ref:"formUpdate",attrs:{model:t.formUpdate,"label-width":50,rules:t.rulesUpdate}},[a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.formUpdate.remark,callback:function(e){t.$set(t.formUpdate,"remark",e)},expression:"formUpdate.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.updateSubmit("formUpdate","task/rescind/"+t.data.task_id)}}},[t._v("提交")])],1)],1)},staticRenderFns:[]}},VXKl:function(t,e,a){var r=a("MWZo");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("02b562e3",r,!0,{})},W5a2:function(t,e,a){var r=a("g5Zw");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("a9bfabd2",r,!0,{})},"X/aG":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"查看任务报价",width:950,loading:t.loading}},[a("box",{attrs:{title:"查看任务报价"}},[a("detail",{attrs:{title:"任务状态"}},[a("task-status",{attrs:{status:t.task.status}})],1),t._v(" "),a("detail",{attrs:{title:"任务编号"}},[t._v(t._s(t.task.id))]),t._v(" "),a("detail",{attrs:{title:"仓库名称"}}),t._v(" "),a("detail",{attrs:{title:"线路名称"}},[t._v(t._s(t.task.name))]),t._v(" "),a("detail",{attrs:{title:"车型"}},[t._v(t._s(t._f("formatArray")(t.task.car_type_name)))]),t._v(" "),a("detail",{attrs:{title:"上岗时间"}},[t._v(t._s(t.task.work_time))]),t._v(" "),a("detail",{attrs:{title:"到仓时间"}},[t._v(t._s(t.task.arrival_warehouse_time))]),t._v(" "),a("detail",{attrs:{title:"司机报价截止时间"}},[t._v(t._s(t.task.offer_end_time))]),t._v(" "),a("detail",{attrs:{title:"选司机截止时间"}},[t._v(t._s(t.task.choose_driver_end_time))]),t._v(" "),a("detail",{attrs:{title:"任务创建时间"}},[t._v(t._s(t.task.create_time))])],1),t._v(" "),a("box",{attrs:{title:"司机列表"}},[a("alert",[t._v("总计 "+t._s(t.offer.length)+" 人报价，"+t._s(t.offerChangeCount)+" 人可选(所有的司机都会经过方舟仔细筛选，请您放心选择)")]),t._v(" "),a("my-table",{attrs:{columns:t.columns,data:t.offer}})],1),t._v(" "),a(t.component.current,{tag:"components",attrs:{data:t.component.data},on:{"on-change":t.hideComponent}})],1)},staticRenderFns:[]}},XmfH:function(t,e,a){var r=a("VU/8")(a("B3BL"),a("76cA"),!1,function(t){a("mlt6")},"data-v-50792fc6",null);t.exports=r.exports},YNGj:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},YuGU:function(t,e,a){var r=a("kKdy");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("61a606ac",r,!0,{})},Z0zr:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择司机状态",clearable:"",filterable:""},on:{"on-change":t.setValue},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[a("i-option",{attrs:{value:1}},[t._v("被选中")]),t._v(" "),a("i-option",{attrs:{value:2}},[t._v("确认上岗")]),t._v(" "),a("i-option",{attrs:{value:3}},[t._v("无责任解约")])],1)},staticRenderFns:[]}},Z3se:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=_(a("dSCJ")),n=_(a("h7KM")),s=_(a("XmfH")),i=_(a("M0DN")),o=_(a("OaEf")),l=_(a("KrrG")),c=_(a("erDW")),u=_(a("8RRq")),d=_(a("NzrU")),f=_(a("NqaF")),p=_(a("8lzf")),m=_(a("gTEe")),h=_(a("BO+j")),v=_(a("8vx3"));function _(t){return t&&t.__esModule?t:{default:t}}e.default={name:"index",components:{CDatePicker:d.default,DriverSelectStatus:u.default,TaskType:c.default,Remote:l.default,MyLists:r.default,TaskStatus:s.default,TagsTrueOrFalse:o.default,TaskDriverStatus:i.default,mView:f.default,assigned:p.default,safe:h.default,change:m.default,show:v.default},mixins:[n.default],data:function(){var t=this;return{searchForm:{},columns:[{title:"任务类型",render:function(t,e){return t("div",null,[t("tag",{attrs:{color:"gold"}},[1===e.row.type?"主":"临"])])}},{title:"任务编号",key:"id",render:function(e,a){var r=a.row;return e("div",null,[e("a",{on:{click:function(){return t.showComponent("mView",r)}}},[r.id])])}},{title:"商户简称",render:function(t,e){var a=e.row;return t("span",null,[a.merchant?a.merchant.short_name:""])}},{title:"仓名称",render:function(t,e){return t("span",null,[e.row.warehouse.title])}},{title:"线路名称",key:"name"},{title:"（报价/查看）",render:function(t,e){var a=e.row;return t("span",null,[a.browse_count," / ",a.browse_count])}},{title:"任务状态",width:130,render:function(t,e){var a=e.row;return t(s.default,{attrs:{status:a.status}},[])}},{title:"司机信息",render:function(t,e){var a=e.row;return a.rescind?t("tooltip",{attrs:{theme:"light",placement:"top",transfer:!0,content:"手机号码: "+a.rescind.phone+" \n 车辆类型："+a.rescind.car_type.name+" \n 车牌号码 "+a.rescind.car_number,"max-width":250}},[a.rescind?a.rescind.name:""]):a.driver?t("tooltip",{attrs:{theme:"light",placement:"top",transfer:!0,content:"手机号码: "+a.driver.phone+" \n 车辆类型："+a.driver.car_type.name+" \n 车牌号码 "+a.driver.car_number,"max-width":250}},[a.driver?a.driver.name:""]):void 0}},{title:"司机状态",width:120,render:function(t,e){var a=e.row;return t(i.default,{attrs:{status:a.driver_status}},[])}},{title:"上岗日期",render:function(t,e){var a=e.row;return t("span",null,[1===a.type?a.arrival_date:a.temp_start_date])}},{title:"是否指派司机",render:function(t,e){var a=e.row;return t(o.default,{attrs:{status:a.assign_status}},[])}},{title:"是否显示",render:function(e,a){var r,n,s,i=a.row;return e("i-button",{attrs:(r={size:"small",type:1===i.is_show?"success":"primary"},n="size",s="small",n in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,r),on:{click:function(){return t.toggle(i)}}},[1===i.is_show?"是":"否"])}},{title:"详情",render:function(e,a){var r=a.row;return e("div",null,[e("a",{on:{click:function(){return t.showComponent("show",r)}}},["详情"])])}},{title:"操作",render:function(e,a){var r=a.row;return e("dropdown",{attrs:{trigger:"click"},on:{"on-click":function(e){return t.listTrigger(e,r)}}},[e("i-button",{attrs:{size:"small"}},["操作"]),e("dropdown-menu",{slot:"list"},[e("dropdown-item",{attrs:{name:"复制"}},["复制"]),e("dropdown-item",{attrs:{name:"购买保价"}},["购买保价"]),e("dropdown-item",{attrs:{name:"删除"}},["删除"]),e("dropdown-item",{attrs:{name:"作废"}},["作废"]),e("dropdown-item",{attrs:{name:"全都不选"}},["全都不选"]),e("dropdown-item",{attrs:{name:"指派任务"}},["指派任务"]),e("dropdown-item",{attrs:{name:"改派任务"}},["改派任务"])])])}}]}},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("task",{params:this.request(e)}).then(function(e){t.assignmentData(e.data.data)}).finally(function(e){t.loading=!1})},go:function(t,e){this.$router.push({name:t,params:e})},listTrigger:function(t,e){switch(t){case"复制":this.go("task.create",{id:e.id});break;case"指派任务":this.showComponent("assigned",e);break;case"改派任务":this.showComponent("change",e);break;case"作废":this.abandon(e);break;case"删除":this.delete(e);break;case"全都不选":this.none(e);break;case"购买保价":this.showComponent("safe",e)}},toggle:function(t){var e=this,a=this.lists.data.page.current;this.$http.put("task/toggle/"+t.id,{params:{status:t.status}}).then(function(t){}).finally(function(t){e.search(a)})},abandon:function(t){var e=this,a=this.lists.data.page.current;this.$http.put("task/abandon/"+t.id).then(function(t){e.$Message.success("任务作废成功")}).catch(function(t){e.formatErrors(t)}).finally(function(t){e.search(a)})},delete:function(t){var e=this,a=this.lists.data.page.current;this.$http.put("task/delete/"+t.id).then(function(t){e.$Message.success("任务删除成功")}).catch(function(t){e.error(t)}).finally(function(t){e.search(a)})},none:function(t){var e=this,a=this.lists.data.page.current;this.$http.put("task/none/"+t.id).then(function(t){e.$Message.success("全都不选成功")}).catch(function(t){e.formatErrors(t)}).finally(function(t){e.search(a)})}}}},Zpae:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},"a/P1":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i-select",{ref:t.uuid,staticClass:"remote-select",attrs:{filterable:t.remote,remote:t.remote,"remote-method":t.remoteMethod,clearable:"",loading:t.loading},on:{"on-change":t.setValue},model:{value:t.publicValue,callback:function(e){t.publicValue=e},expression:"publicValue"}},t._l(t.options,function(e,r){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))},staticRenderFns:[]}},asC2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("RadioGroup",{attrs:{type:"button"},on:{"on-change":t.change},model:{value:t.publicValue,callback:function(e){t.publicValue=e},expression:"publicValue"}},[t._l(t.checkboxs,function(e,r){return[a("Radio",{attrs:{value:e.id,label:e.id}},[t._v(t._s(e.title))])]})],2)},staticRenderFns:[]}},dCzE:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"指派司机",width:850,loading:t.loading}},[a("my-lists",{attrs:{columns:t.columns},on:{change:t.search},model:{value:t.lists.data,callback:function(e){t.$set(t.lists,"data",e)},expression:"lists.data"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("搜索")])]),t._v(" "),a("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":60}},[a("FormItem",{attrs:{label:"司机姓名"}},[a("remote",{attrs:{"remote-url":"driver/select","search-key":"name",remote:!0},model:{value:t.searchForm.id,callback:function(e){t.$set(t.searchForm,"id",e)},expression:"searchForm.id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"司机类型"}},[a("i-select",{model:{value:t.searchForm.driver_type,callback:function(e){t.$set(t.searchForm,"driver_type",e)},expression:"searchForm.driver_type"}},[a("i-option",{attrs:{value:0}},[t._v("自营司机")]),t._v(" "),a("i-option",{attrs:{value:1}},[t._v("合作司机")]),t._v(" "),a("i-option",{attrs:{value:2}},[t._v("社会司机")])],1)],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.search(1)}}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("已选 （"),a("a",{on:{click:function(e){t.displayChooseDrivers=!0}}},[t._v(t._s(t.chooseDrivers.length))]),t._v("）个司机, "),a("a",{on:{click:function(e){t.displayChooseDrivers=!0}}},[t._v("点击 ")]),t._v("\n            可查看")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,disabled:0===t.chooseDrivers.length},on:{click:function(e){t.displayAssignedUnitPrice=!0}}},[t._v("提交\n        ")])],1),t._v(" "),a("Modal",{attrs:{title:"已选司机",width:700},model:{value:t.displayChooseDrivers,callback:function(e){t.displayChooseDrivers=e},expression:"displayChooseDrivers"}},[a("my-table",{attrs:{columns:t.chooseColumns,data:t.chooseDrivers}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("Modal",{attrs:{title:"选择价格",width:300},model:{value:t.displayAssignedUnitPrice,callback:function(e){t.displayAssignedUnitPrice=e},expression:"displayAssignedUnitPrice"}},[a("i-input",{attrs:{number:""},model:{value:t.assignedFrom.unit_price,callback:function(e){t.$set(t.assignedFrom,"unit_price",e)},expression:"assignedFrom.unit_price"}},[a("Icon",{attrs:{slot:"prepend",type:"logo-usd"},slot:"prepend"}),t._v(" "),a("i-button",{attrs:{slot:"append",type:"primary"},on:{click:t.assigned},slot:"append"},[t._v("提交")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]}},dSCJ:function(t,e,a){var r=a("VU/8")(a("tCFX"),a("0eeJ"),!1,function(t){a("qN8B")},"data-v-46901fae",null);t.exports=r.exports},"ea6+":function(t,e,a){var r=a("YNGj");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("a9fb40d6",r,!0,{})},erDW:function(t,e,a){var r=a("VU/8")(a("F1M5"),a("LmO9"),!1,function(t){a("GHnE")},"data-v-1529bdf7",null);t.exports=r.exports},fbZ7:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},g5Zw:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},gTEe:function(t,e,a){var r=a("VU/8")(a("+4U+"),a("jVD7"),!1,function(t){a("S/nR")},"data-v-c7f98806",null);t.exports=r.exports},gWVl:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},h7KM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=a("nf43"),s=(r=n)&&r.__esModule?r:{default:r};e.default={mixins:[s.default],data:function(){return{searchForm:{},lists:{data:{data:[],page:{total:0,current:1,page_size:20}}},component:{current:"",data:{}}}},mounted:function(){this.search()},methods:{search:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},assignmentData:function(t){this.lists.data.data=t.data,this.lists.data.page.total=t.total,this.lists.data.page.current=t.current_page,this.lists.data.page.page_size=t.per_page},showComponent:function(t,e){this.component.current=t,this.component.data=e},hideComponent:function(){this.component.current="",this.component.data={},this.search()},destroyItem:function(t,e){var a=this;this.loading=!0,this.$http.delete(e).then(function(t){a.search()}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1})},request:function(t){var e=JSON.parse(JSON.stringify(this.searchForm));return e.page=t,e}}}},jVD7:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"改派司机",width:850,loading:t.loading}},[a("my-lists",{attrs:{columns:t.columns},on:{change:t.search},model:{value:t.lists.data,callback:function(e){t.$set(t.lists,"data",e)},expression:"lists.data"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("搜索")])]),t._v(" "),a("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":60}},[a("FormItem",{attrs:{label:"司机姓名"}},[a("remote",{attrs:{"remote-url":"driver/select","search-key":"name",remote:!0},model:{value:t.searchForm.id,callback:function(e){t.$set(t.searchForm,"id",e)},expression:"searchForm.id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"司机类型"}},[a("i-select",{model:{value:t.searchForm.driver_type,callback:function(e){t.$set(t.searchForm,"driver_type",e)},expression:"searchForm.driver_type"}},[a("i-option",{attrs:{value:0}},[t._v("自营司机")]),t._v(" "),a("i-option",{attrs:{value:1}},[t._v("合作司机")]),t._v(" "),a("i-option",{attrs:{value:2}},[t._v("社会司机")])],1)],1),t._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.search(1)}}},[t._v("搜索")])],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"已选司机",width:700},model:{value:t.displayChooseDrivers,callback:function(e){t.displayChooseDrivers=e},expression:"displayChooseDrivers"}},[a("my-table",{attrs:{columns:t.chooseColumns,data:t.chooseDrivers}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("Modal",{attrs:{title:"选择价格",width:300},model:{value:t.displayAssignedUnitPrice,callback:function(e){t.displayAssignedUnitPrice=e},expression:"displayAssignedUnitPrice"}},[a("i-input",{attrs:{number:""},model:{value:t.assignedFrom.unit_price,callback:function(e){t.$set(t.assignedFrom,"unit_price",e)},expression:"assignedFrom.unit_price"}},[a("Icon",{attrs:{slot:"prepend",type:"logo-usd"},slot:"prepend"}),t._v(" "),a("i-button",{attrs:{slot:"append",type:"primary"},on:{click:t.assigned},slot:"append"},[t._v("提交")])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]}},jjM2:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},kKdy:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".box[data-v-be6cef20]{margin-bottom:10px;border:1px solid #dddee1;border-radius:5px}.box[data-v-be6cef20]:last-child{margin-bottom:0}.box-header[data-v-be6cef20]{padding:8px 48px 8px 16px;color:#495060;font-size:12px;line-height:16px;border-bottom:1px solid #dddee1}.box-detail[data-v-be6cef20]{padding:10px}",""])},keSp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("9Xvl"),n=i(a("pEmh")),s=i(a("PJh5"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"c-date-picker",mixins:[n.default],props:{value:{type:[Date,String,Array]},type:{validator:function(t){return(0,r.oneOf)(t,["year","month","date","daterange","datetime","datetimerange"])},default:"date"},format:String,options:Object,readonly:{type:Boolean,default:!1},panels:{type:Boolean,default:!1},customize:{type:Boolean,default:!1}},data:function(){return{sValue:this.value}},methods:{change:function(t,e){this.$emit("on-change",t),this.$emit("input",t),this.$emit("on-change",t),this.dispatch("FormItem","on-form-blur",t)}},watch:{value:function(t){this.customize&&void 0!==t&&"00:00:00"===(0,s.default)(t[1]).format("HH:mm:ss")&&(t[1]=(0,s.default)(t[1]).format("YYYY-MM-DD")+" 23:59:59"),this.sValue=t}}}},ki0W:function(t,e,a){var r=a("VU/8")(a("MtHA"),a("VFbF"),!1,function(t){a("UVDD")},"data-v-2cbd1982",null);t.exports=r.exports},m92N:function(t,e,a){var r=a("TU5o");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("4012a4f2",r,!0,{})},mHOb:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Col",{staticClass:"box-detail",attrs:{span:t.span,offset:t.offset}},[""!==t.title?a("div",{staticClass:"box-detail-title",style:{width:t.titleWidth+"px"}},[t._v(t._s(t.title)+"：")]):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},mlt6:function(t,e,a){var r=a("DPOY");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("80dc28ec",r,!0,{})},o0I1:function(t,e,a){var r=a("jjM2");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("ef1a355a",r,!0,{})},"p/y2":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},pEmh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{dispatch(t,e,a){let r=this.$parent||this.$root,n=r.$options.name;for(;r&&(!n||n!==t);)(r=r.$parent)&&(n=r.$options.name);r&&r.$emit.apply(r,[e].concat(a))},broadcast(t,e,a){(function t(e,a,r){this.$children.forEach(n=>{n.$options.name===e?n.$emit.apply(n,[a].concat(r)):t.apply(n,[e,a].concat([r]))})}).call(this,t,e,a)}}}},q9RQ:function(t,e,a){var r=a("QCwG");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("5455291c",r,!0,{})},qN8B:function(t,e,a){var r=a("5EYM");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("78e1c74c",r,!0,{})},qkgB:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal-body[data-v-67bf1da2]{max-height:650px;overflow-y:auto}",""])},s7MV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"box",props:{title:{type:String,default:"标题"},form:[Boolean]}}},"sF/1":function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box",class:{"box-form":this.form}},[e("div",{staticClass:"box-header"},[this._v(this._s(this.title))]),this._v(" "),e("Row",{staticClass:"box-detail"},[this._t("default")],2)],1)},staticRenderFns:[]}},tCFX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=a("Uo1L"),s=(r=n)&&r.__esModule?r:{default:r};e.default={name:"my-lists",components:{MyTable:s.default},props:{value:{type:Object,default:function(){return{data:[],page:{total:100,current:1,page_size:20}}}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$emit("change",t)},rowClassName:function(t,e){}}}},"tXO/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(a("HtL/")),n=f(a("h7KM")),s=f(a("6NqX")),i=f(a("RGLJ")),o=f(a("OcB2")),l=f(a("Uo1L")),c=f(a("XmfH")),u=a("9Xvl"),d=f(a("ki0W"));function f(t){return t&&t.__esModule?t:{default:t}}e.default={name:"mview",components:{TaskStatus:c.default,MyTable:l.default,Box:o.default,Detail:i.default,ComponentModal:r.default,Rescind:d.default},mixins:[s.default,n.default],data:function(){var t=this;return{task:{},columns:[{title:"司机姓名",render:function(t,e){var a=e.row;return t("span",null,[a.driver?a.driver.name:""])}},{title:"手机号码",width:120,render:function(t,e){var a=e.row;return t("span",null,[a.driver?a.driver.phone:""])}},{title:"车牌号码",render:function(t,e){var a=e.row;return t("span",null,[a.driver?a.driver.car_number:""])}},{title:"报价时间",key:"create_time",tooltip:!0},{title:"竞标语",key:"remark",tooltip:!0},{title:"状态",render:function(e,a){var r=a.row;return e("span",null,[e("tag",{directives:[{name:"show",value:r.driver_id===t.task.driver_id}],attrs:{color:"green"}},["被选中"]),e("tag",{directives:[{name:"show",value:(0,u.oneOf)(r.status,[1,2])&&r.driver_id!==t.task.driver_id}],attrs:{color:"lime"}},["没选中"]),e("tag",{directives:[{name:"show",value:0===r.status}],attrs:{color:"yellow"}},["取消报价"])])}},{title:"报价",key:"unit_price"},{title:"操作",render:function(e,a){var r=a.row;if((0,u.oneOf)(t.task.status,[3,4,5,6])||(0,u.oneOf)(t.task.driver_status,[3,4])||0!==r.status)return e("div",null,[e("i-button",{attrs:{size:"small",type:"info"},on:{click:function(){return t.choose(r)}},directives:[{name:"show",value:r.driver_id!==t.task.driver_id}]},["选司机"]),e("i-button",{attrs:{size:"small",type:"error"},on:{click:function(){return t.showComponent("Rescind",r)}},directives:[{name:"show",value:r.driver_id===t.task.driver_id}]},["无责任解约"])])}}]}},computed:{offer:function(){return this.task.offer||[]},offerChangeCount:function(){return this.offer.filter(function(t){return 0!==t.status}).length}},mounted:function(){this.search()},methods:{search:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$http.get("task/offer/"+this.data.id).then(function(e){t.task=e.data.data,t.loading=!1})},choose:function(t){var e=this;this.$http.put("task/choose/"+this.data.id,{driver_id:t.driver_id}).then(function(t){e.search()})}},filters:{formatArray:function(t){return(t||[]).join(",")}}}},u7O2:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"购买保价",width:800}},[a("Form",{ref:"formUpdate",attrs:{model:t.formUpdate,"label-width":100,rules:t.rulesUpdate}},[a("FormItem",{attrs:{label:"保价服务",prop:"merchant_safe_id"}},[a("group-radio",{attrs:{url:"safe/select"},model:{value:t.formUpdate.merchant_safe_id,callback:function(e){t.$set(t.formUpdate,"merchant_safe_id",e)},expression:"formUpdate.merchant_safe_id"}}),t._v(" "),a("br"),t._v("选择方舟保价服务，为您的货物保驾护航,服务将在司机签到时生效\n        ")],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.updateSubmit("formUpdate","task/safe/"+t.data.id)}}},[t._v("提交\n        ")])],1)],1)},staticRenderFns:[]}},uxXg:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},v6QF:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"查看任务详情",width:950,loading:t.loading}},[a("box",{attrs:{title:"任务信息"}},[a("detail",{attrs:{title:"任务编号"}},[t._v(t._s(t.task.id))]),t._v(" "),a("detail",{attrs:{title:"任务状态"}},[a("task-status",{attrs:{status:t.task.status}})],1),t._v(" "),a("detail",{attrs:{title:"任务创建时间"}},[t._v(t._s(t.task.create_time))]),t._v(" "),a("detail",{attrs:{title:"任务类型"}},[t._v(t._s(1===t.task.type?"主任务":"临时任务"))]),t._v(" "),a("detail",{attrs:{title:"仓库名称"}},[t._v(t._s(t.task.warehouse.title))]),t._v(" "),a("detail",{attrs:{title:"线路名称"}},[t._v(t._s(t.task.name))]),t._v(" "),a("detail",{attrs:{title:"是否固定点"}},[t._v(t._s(1===t.task.is_fixed_point?"固定点":"非固定点"))]),t._v(" "),a("detail",{attrs:{title:"是否返仓"}},[t._v(t._s(1===t.task.is_back?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"非固定点配送点"}},[t._v(t._s(t._f("formatNumber")(t.task.unfixed_json))+"个 ")]),t._v(" "),a("detail",{attrs:{title:"配送总里程"}},[t._v(t._s(t._f("formatNumber")(t.task.distance_json))+" 公里")]),t._v(" "),a("detail",{attrs:{title:"配送区域描述"}},[t._v(t._s(t.task.delivery_point_remark))]),t._v(" "),a("detail",{attrs:{title:"保险"}},[t._v(t._s(0===t.task.merchant_safe_id?"未购买":1===t.task.merchant_safe.is_per?"运费的"+t.task.merchant_safe.is_per+"%":t.task.merchant_safe.safe_fee)+"\n        ")]),t._v(" "),a("detail",{attrs:{title:"车型",span:12}},[t._v(t._s(t._f("formatArray")(t.task.car_type_name)))])],1),t._v(" "),t.task.delivery?a("box",{attrs:{title:"固定配送点信息"}},[a("Table",{ref:"table",attrs:{columns:t.tableCol,data:t.task.delivery,size:"small",loading:t.loading}})],1):t._e(),t._v(" "),a("box",{attrs:{title:"任务时间"}},[a("detail",{attrs:{title:"司机上岗日期"}},[t._v(t._s(1===t.task.type?t.task.arrival_date:t.task.temp_start_date))]),t._v(" "),a("detail",{attrs:{title:"配送时间"}},[t._v("\n            "+t._s(t._f("formatWeek")(2===t.task.type?t.task.temp_start_date:t.task.send_time))+"\n        ")]),t._v(" "),a("detail",{attrs:{title:"到仓时间"}},[t._v(t._s(t.task.arrival_warehouse_time))]),t._v(" "),a("detail",{attrs:{title:"预计完成时间"}},[t._v(t._s(t.task.estimate_time))]),t._v(" "),a("detail",{attrs:{title:"报价截止时间",span:8}},[t._v(t._s(t.task.offer_end_time))]),t._v(" "),a("detail",{attrs:{title:"选司机截止时间",span:8}},[t._v(t._s(t.task.choose_driver_end_time))])],1),t._v(" "),a("box",{attrs:{title:"任务描述"}},[a("detail",{attrs:{title:"货物类型"}},[t._v(t._s(t.task.goods_remark))]),t._v(" "),a("detail",{attrs:{title:"货物总体积"}},[t._v(t._s(t._f("formatNumber")(t.task.goods_volume))+"立方米")]),t._v(" "),a("detail",{attrs:{title:"货物件数"}},[t._v(t._s(t._f("formatNumber")(t.task.goods_num))+"件")]),t._v(" "),a("detail",{attrs:{title:"货物总重量"}},[t._v(t._s(t._f("formatNumber")(t.task.goods_weight))+"吨")]),t._v(" "),a("detail",{attrs:{title:"是否回单"}},[t._v(t._s(1===t.task.back_bill?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"预计每趟价格"}},[t._v(t._s(t._f("formatNumber")(t.task.unit_price))+"元")]),t._v(" "),a("detail",{attrs:{title:"报价说明"}},[t._v(t._s(t.task.price_remark))])],1),t._v(" "),a("box",{attrs:{title:"搬运说明"}},[a("detail",{attrs:{title:"货物类型"}},[t._v(t._s(t._f("formatCarry")(t.task.carry_type)))]),t._v(" "),a("detail",{attrs:{title:"自带小工"}},[t._v(t._s(1===t.task.extra.carry.is_worker?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"帮忙装货"}},[t._v(t._s(1===t.task.extra.carry.is_loading?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"帮忙卸货"}},[t._v(t._s(1===t.task.extra.carry.is_unloading?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"搬运说明"}},[t._v(t._s(0===t.task.carry_type?"无需搬运":t.task.extra.carry.textarea))])],1),t._v(" "),a("box",{attrs:{title:"上岗要求"}},[a("detail",{attrs:{title:"需要拆后座"}},[t._v(t._s(1===t.task.extra.other.is_remove_seat?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"需要小推车"}},[t._v(t._s(1===t.task.extra.other.is_trolley?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"需要带尾板"}},[t._v(t._s(1===t.task.extra.other.is_tail_plate?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"需要配备双灭火器"}},[t._v(t._s(1===t.task.extra.other.is_extinguisher?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"需要配备明锁/暗锁"}},[t._v(t._s(1===t.task.extra.other.is_lock?"是":"否"))]),t._v(" "),a("detail",{attrs:{title:"其他上岗要求"}},[t._v(t._s(t.task.extra.other.other_require))])],1),t._v(" "),a("box",{attrs:{title:"其他说明"}},[a("detail",{attrs:{title:"任务补充说明",span:25}},[t._v(t._s(t._f("valueOfSingle")(t.task.extra.supply)))]),t._v(" "),a("detail",{attrs:{title:"配送经验要求",span:25}},[t._v(t._s(t._f("valueOfSingle")(t.task.extra.dispatching)))]),t._v(" "),a("detail",{attrs:{title:"司机福利/补贴/奖励",span:25}},[t._v(t._s(t._f("valueOfSingle")(t.task.extra.welfare)))])],1)],1)},staticRenderFns:[]}},wU3S:function(t,e,a){var r=a("BUw7");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("3d057e9a",r,!0,{})},xBaJ:function(t,e,a){var r=a("VU/8")(a("Z3se"),a("BeHn"),!1,function(t){a("o0I1")},"data-v-81546e6c",null);t.exports=r.exports},xi7R:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=a("nf43"),s=(r=n)&&r.__esModule?r:{default:r};e.default={mixins:[s.default],methods:{unObserver:function(t){return JSON.parse(JSON.stringify(t))},updateSubmit:function(t,e){var a=this;this.$refs[t].validate(function(r){r?(a.loading=!0,a.$http.put(e,a.unObserver(a._data[t])).then(function(t){a.$Message.success("Success!"),a.change(!1)}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1})):a.$Message.error("验证不通过!")})},createSubmit:function(t,e){var a=this;this.$refs[t].validate(function(r){r&&(a.loading=!0,a.$http.post(e,a._data[t]).then(function(t){a.$Message.success("Success!"),a.change(!1)}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1}))})}}}},zN6J:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticStyle:{position:"relative"},attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._t("footer")],2)],1)},staticRenderFns:[]}}});
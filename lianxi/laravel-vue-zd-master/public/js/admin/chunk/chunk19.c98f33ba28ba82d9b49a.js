webpackJsonp([19],{"0LgJ":function(t,e,a){var n=a("KSLu");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("229ceecc",n,!0,{})},"1EQ6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"group-option",props:{value:{},data:{type:Array,default:function(){return[]}}},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}}},"4OJv":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},"5zgR":function(t,e,a){var n=a("Jvvi");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("84be1e2a",n,!0,{})},"6NqX":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{data:{}},data:function(){return{loading:!1}},methods:{change:function(t){!1===t&&this.$emit("on-change")}}}},"8Xt4":function(t,e,a){var n=a("VU/8")(a("9HIt"),a("cXRv"),!1,function(t){a("0LgJ")},"data-v-7b81b195",null);t.exports=n.exports},"8pyk":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(a("h7KM")),r=l(a("8Xt4")),o=l(a("Md08")),i=l(a("Tdke"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={components:{TabelExpandTree:i.default,Create:r.default,Update:o.default},mixins:[n.default],name:"index",data:function(){var t=this;return{id:0,modal:!1,modal_loading:!1,columns:[{title:"菜单名称",key:"title",render:function(t,e){return t("span",{class:"table-col-title"},[e.row.title])}},{title:"菜单路径",width:250,key:"name"},{title:"是否菜单",render:function(t,e){return t("span",null,[e.row.islink?"菜单":"权限"])}},{title:"菜单图标",render:function(t,e){return t("Icon",{attrs:{type:e.row.icon,size:18}})}},{title:"排序",key:"sort"},{title:"操作",render:function(e,a){var n=a.row;return e("button-group",null,[e("i-button",{attrs:{size:"small"},on:{click:function(){return t.showComponent("Update",n)}}},["修改"]),e("i-button",{attrs:{size:"small",disabled:t.child(n.id).length>0},on:{click:function(){t.modal=!0,t.id=n.id}}},["删除"])])}}],lists:[]}},methods:{search:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$http.get("permission").then(function(e){t.lists=e.data.data}).catch(function(e){t.formatErrors(e)}).finally(function(){t.loading=!1})},child:function(t){return this.lists.filter(function(e){return e.parent_id==t})},del:function(){var t=this;this.modal_loading=!0,setTimeout(function(){t.modal_loading=!1,t.modal=!1,t.destroyItem(t.id,"permission/"+t.id)},1e3)}}}},"9HIt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(a("6NqX")),r=s(a("HtL/")),o=s(a("xy8G")),i=s(a("DQoi")),l=s(a("xi7R"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{GroupCascader:i.default,GroupOption:o.default,ComponentModal:r.default},name:"create",mixins:[n.default,l.default],data:function(){return{formCreate:{parent_id:0,title:"",name:"",islink:1,sort:1,icon:""},parents:[]}},mounted:function(){var t=this;this.$http.get("permission",{params:{islink:1}}).then(function(e){t.parents=e.data.data})}}},BWXv:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".permission-role .ivu-table-body{overflow-y:auto}",""])},Cudp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(a("6NqX")),r=s(a("HtL/")),o=s(a("xy8G")),i=s(a("DQoi")),l=s(a("xi7R"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{GroupCascader:i.default,GroupOption:o.default,ComponentModal:r.default},name:"update",mixins:[n.default,l.default],data:function(){return{formUpdate:{parent_id:0,title:"",name:"",islink:1,sort:1,icon:""},parents:[]}},mounted:function(){var t=this;this.loading=!0,this.$http.get("permission",{params:{islink:1}}).then(function(e){t.parents=e.data.data}).catch(function(e){t.formatErrors(e)}),this.$http.get("permission/"+this.data.id).then(function(e){t.formUpdate=e.data.data}).catch(function(e){t.formatErrors(e)}).finally(function(){t.loading=!1})}}},CumG:function(t,e,a){var n=a("BWXv");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("791c4fb3",n,!0,{})},DQoi:function(t,e,a){var n=a("VU/8")(a("KD57"),a("mdab"),!1,function(t){a("SQYd")},"data-v-aa499916",null);t.exports=n.exports},GWUp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"component-modal",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:650},loading:{type:Boolean,default:!1}},methods:{change:function(t){this.$parent.$emit("on-change")}}}},"HtL/":function(t,e,a){var n=a("VU/8")(a("GWUp"),a("zN6J"),!1,function(t){a("LrlP")},"data-v-67bf1da2",null);t.exports=n.exports},Jvvi:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},KD57:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"group-cascader",props:{data:{type:Array,default:function(){return[]}},value:{},label:{type:String,default:"title"},fValue:{type:String,default:"id"},placeholder:{type:String,default:""}},computed:{formatData:function(){return this.convert(JSON.parse(JSON.stringify(this.data)))},formatValue:{get:function(){var t=this,e=this.data.find(function(e){return e[t.fValue]===t.value});if(e){var a=this.findP(this.data,e);return a.push(e[this.fValue]),a}return[]},set:function(t){t[t.length-1]?this.$emit("input",t[t.length-1]):this.$emit("input",0)}}},methods:{convert:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return t.forEach(function(r,o){r.parent_id===a&&(delete t[o],n.push({value:r[e.fValue],label:r[e.label],children:e.convert(t,r.id)}))}),n},findP:function(t,e){var a=this,n=[];return t.forEach(function(r){r.id===e.parent_id&&(n.push(r[a.fValue]),n=a.findP(t,r).concat(n))}),n}}}},KSLu:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},LrlP:function(t,e,a){var n=a("qkgB");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("4cb8b4f2",n,!0,{})},Md08:function(t,e,a){var n=a("VU/8")(a("Cudp"),a("PptP"),!1,function(t){a("tFA1")},"data-v-22628a7c",null);t.exports=n.exports},NGrn:function(t,e,a){var n=a("d7DV");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("d471a138",n,!0,{})},PptP:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"修改权限",loading:t.loading}},[a("Form",{ref:"formUpdate",attrs:{model:t.formUpdate,"label-width":80}},[a("FormItem",{attrs:{label:"上级菜单",prop:"parent_id"}},[a("group-cascader",{attrs:{placeholder:"若为顶级菜单可不选择",data:t.parents},model:{value:t.formUpdate.parent_id,callback:function(e){t.$set(t.formUpdate,"parent_id",e)},expression:"formUpdate.parent_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单名称",prop:"title",rules:{required:!0,message:"菜单名称不能为空"}}},[a("Input",{attrs:{placeholder:"菜单名称"},model:{value:t.formUpdate.title,callback:function(e){t.$set(t.formUpdate,"title",e)},expression:"formUpdate.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单路径",prop:"name",rules:{required:!0,message:"菜单路径不能为空，且格式为 a-z.a-z ！",pattern:/[a-z]+\.[a-z]+/}}},[a("Input",{attrs:{placeholder:"菜单路径"},model:{value:t.formUpdate.name,callback:function(e){t.$set(t.formUpdate,"name",e)},expression:"formUpdate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"排序",prop:"sort",rules:{required:!0,message:"排序不能为空"}}},[a("Input",{attrs:{placeholder:"排序"},model:{value:t.formUpdate.sort,callback:function(e){t.$set(t.formUpdate,"sort",e)},expression:"formUpdate.sort"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单图标",prop:"icon"}},[a("Input",{attrs:{placeholder:"菜单图标"},model:{value:t.formUpdate.icon,callback:function(e){t.$set(t.formUpdate,"icon",e)},expression:"formUpdate.icon"}})],1),t._v(" "),a("FormItem",{attrs:{label:"是否菜单",prop:"islink"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.formUpdate.islink,callback:function(e){t.$set(t.formUpdate,"islink",e)},expression:"formUpdate.islink"}},[a("Radio",{attrs:{label:1,value:1}},[t._v("菜单")]),t._v(" "),a("Radio",{attrs:{label:0,value:0}},[t._v("权限")])],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateSubmit("formUpdate","permission/"+t.data.id)}}},[t._v("更新")])],1)],1)},staticRenderFns:[]}},SQYd:function(t,e,a){var n=a("oXb/");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("408972b6",n,!0,{})},Tdke:function(t,e,a){var n=a("VU/8")(a("x6Oc"),a("xmPW"),!1,function(t){a("NGrn")},null,null);t.exports=n.exports},VpkN:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Select",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._l(t.data,function(e,n){return[e.children&&e.children.length?a("OptionGroup",{attrs:{label:e.name}},t._l(e.children,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})):a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])]})],2)},staticRenderFns:[]}},cXRv:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("component-modal",{attrs:{title:"创建权限",loading:t.loading}},[a("Form",{ref:"formCreate",attrs:{model:t.formCreate,"label-width":80}},[a("FormItem",{attrs:{label:"上级菜单",prop:"parent_id"}},[a("group-cascader",{attrs:{placeholder:"若为顶级菜单可不选择",data:t.parents},model:{value:t.formCreate.parent_id,callback:function(e){t.$set(t.formCreate,"parent_id",e)},expression:"formCreate.parent_id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单名称",prop:"title",rules:{required:!0,message:"菜单名称不能为空"}}},[a("Input",{attrs:{placeholder:"菜单名称"},model:{value:t.formCreate.title,callback:function(e){t.$set(t.formCreate,"title",e)},expression:"formCreate.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单路径",prop:"name",rules:{required:!0,message:"菜单路径不能为空，且格式为 a-z.a-z ！",pattern:/[a-z]+\.[a-z]+/}}},[a("Input",{attrs:{placeholder:"菜单路径"},model:{value:t.formCreate.name,callback:function(e){t.$set(t.formCreate,"name",e)},expression:"formCreate.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"排序",prop:"sort",rules:{required:!0,message:"排序不能为空"}}},[a("Input",{attrs:{placeholder:"排序"},model:{value:t.formCreate.sort,callback:function(e){t.$set(t.formCreate,"sort",e)},expression:"formCreate.sort"}})],1),t._v(" "),a("FormItem",{attrs:{label:"菜单图标",prop:"icon"}},[a("Input",{attrs:{placeholder:"菜单图标"},model:{value:t.formCreate.icon,callback:function(e){t.$set(t.formCreate,"icon",e)},expression:"formCreate.icon"}})],1),t._v(" "),a("FormItem",{attrs:{label:"是否菜单",prop:"islink"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.formCreate.islink,callback:function(e){t.$set(t.formCreate,"islink",e)},expression:"formCreate.islink"}},[a("Radio",{attrs:{label:1,value:1}},[t._v("菜单")]),t._v(" "),a("Radio",{attrs:{label:0,value:0}},[t._v("权限")])],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.createSubmit("formCreate","permission")}}},[t._v("创建")])],1)],1)},staticRenderFns:[]}},d7DV:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".ivu-table-expanded-cell{padding:0!important;height:auto!important;border-bottom:none!important}.ivu-table-expanded-cell>.ivu-table-wrapper{height:100%!important;margin-bottom:0!important;border:none!important}.ivu-table-expanded-cell .table-expand-tree-0 .table-col-title{padding-left:20px}.ivu-table-expanded-cell .table-expand-tree-1 .table-col-title{padding-left:40px}.ivu-table-expanded-cell .table-expand-tree-2 .table-col-title{padding-left:60px}.ivu-table-expanded-cell .table-expand-tree-3 .table-col-title{padding-left:80px}.ivu-table-expanded-cell .table-expand-tree-4 .table-col-title{padding-left:100px}.ivu-table-expanded-cell .table-expand-tree-5 .table-col-title{padding-left:120px}",""])},h7KM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=a("nf43"),o=(n=r)&&n.__esModule?n:{default:n};e.default={mixins:[o.default],data:function(){return{searchForm:{},lists:{data:{data:[],page:{total:0,current:1,page_size:20}}},component:{current:"",data:{}}}},mounted:function(){this.search()},methods:{search:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},assignmentData:function(t){this.lists.data.data=t.data,this.lists.data.page.total=t.total,this.lists.data.page.current=t.current_page,this.lists.data.page.page_size=t.per_page},showComponent:function(t,e){this.component.current=t,this.component.data=e},hideComponent:function(){this.component.current="",this.component.data={},this.search()},destroyItem:function(t,e){var a=this;this.loading=!0,this.$http.delete(e).then(function(t){a.search()}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1})},request:function(t){var e=JSON.parse(JSON.stringify(this.searchForm));return e.page=t,e}}}},mdab:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("Cascader",{attrs:{data:t.formatData,"change-on-select":!0,trigger:"click",placeholder:t.placeholder},model:{value:t.formatValue,callback:function(e){t.formatValue=e},expression:"formatValue"}})},staticRenderFns:[]}},"oXb/":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},qkgB:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal-body[data-v-67bf1da2]{max-height:650px;overflow-y:auto}",""])},"sNH/":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box-flex-list"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("列表")]),t._v(" "),a("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.showComponent("Create")}}},[t._v("添加")])],1),t._v(" "),a("TabelExpandTree",{staticClass:"permission-role",attrs:{columns:t.columns,data:t.lists,loading:t.loading}}),t._v(" "),a("Modal",{attrs:{width:"200"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),a("span",[t._v("删除确认")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("确认要删除吗？")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"default",long:"",loading:t.modal_loading},on:{click:t.del}},[t._v("确认")])],1)])],1)],1),t._v(" "),a(t.component.current,{tag:"components",attrs:{data:t.component.data},on:{"on-change":t.hideComponent}})],1)},staticRenderFns:[]}},tFA1:function(t,e,a){var n=a("4OJv");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("48a297b6",n,!0,{})},wlrh:function(t,e,a){var n=a("VU/8")(a("8pyk"),a("sNH/"),!1,function(t){a("CumG")},null,null);t.exports=n.exports},x6Oc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"tabel-expand-tree",props:{data:Array,columns:Array,loading:Boolean},data:function(){var t=this;return{defaultColumn:[{type:"expand",render:function(e,a){var n=a.row;a.index;return e("i-table",{attrs:{"show-header":!1,data:t.child(n.id),columns:t.mergeCol},directives:[{name:"show",value:t.child(n.id)&&t.child(n.id).length}],class:"table-expand-tree-"+t.level(n).length},[])},width:50}]}},computed:{parent:function(){return this.child(0)},mergeCol:function(){return this.defaultColumn.concat(this.columns)},defaultData:function(){var t=JSON.parse(JSON.stringify(this.data));return t.forEach(function(e,a){t[a]._expanded=!0}),t}},methods:{child:function(t){return JSON.parse(JSON.stringify(this.defaultData.filter(function(e){return e.parent_id==t})))},level:function(t){var e,a=[];return(e=this.defaultData.find(function(e){return e.id==t.parent_id}))&&(a.push(e),a=a.concat(this.level(e))),a}}}},xi7R:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=a("nf43"),o=(n=r)&&n.__esModule?n:{default:n};e.default={mixins:[o.default],methods:{unObserver:function(t){return JSON.parse(JSON.stringify(t))},updateSubmit:function(t,e){var a=this;this.$refs[t].validate(function(n){n?(a.loading=!0,a.$http.put(e,a.unObserver(a._data[t])).then(function(t){a.$Message.success("Success!"),a.change(!1)}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1})):a.$Message.error("验证不通过!")})},createSubmit:function(t,e){var a=this;this.$refs[t].validate(function(n){n&&(a.loading=!0,a.$http.post(e,a._data[t]).then(function(t){a.$Message.success("Success!"),a.change(!1)}).catch(function(t){a.formatErrors(t)}).finally(function(){a.loading=!1}))})}}}},xmPW:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("Table",{attrs:{columns:this.mergeCol,data:this.parent,loading:this.loading}})},staticRenderFns:[]}},xy8G:function(t,e,a){var n=a("VU/8")(a("1EQ6"),a("VpkN"),!1,function(t){a("5zgR")},"data-v-1cab3f7f",null);t.exports=n.exports},zN6J:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticStyle:{position:"relative"},attrs:{title:t.title,value:!0,transfer:!1,"mask-closable":!1,width:t.width},on:{"on-visible-change":t.change}},[t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._t("footer")],2)],1)},staticRenderFns:[]}}});